<!doctype html>
<meta charset="utf-8">
<label for="length_number">文字数:</label>
<select id="length_number">
    <option>8</option>
    <option>12</option>
    <option>24</option>
    <option>32</option>
    <option>64</option>
</select>
<button type="button" onclick="generateAndCopy()">PASSWORD</button>
<p id="output"></p>

<script>
function random(length = 8) {
    const alpha_number = ['ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789#$*+&'];
    let character = '';

    for (let str of alpha_number) {
        character += str;
    }

    character = character.split('').sort(() => Math.random() - 0.5).join('');

    return character.substring(0, length);
}
async function copyToClipboard(text) {
    try {
        await navigator.clipboard.writeText(text);
        alert("Copied to clipboard: " + text);
    } catch (err) {
        console.error('Failed to copy: ', err);
    }
}

function generateAndCopy() {
    const num = document.getElementById("length_number").value;
    const randomString = random(num);
    document.getElementById('output').innerText = randomString;
    copyToClipboard(randomString);
}
</script>
